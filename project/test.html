<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI Notes Viewer</title>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<style>
  body {
  font-family: 'Segoe UI', sans-serif;
  background: #f4f4f4;
  padding: 20px;
  margin: 0;
}

h1 {
  text-align: center;
  color: #333;
}

.subject {
  margin-bottom: 40px;
}

.subject h2 {
  margin-bottom: 10px;
  color: #222;
}

.notes-container {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
}

.note-card {
  width: 220px;
  border: 1px solid #ddd;
  border-radius: 10px;
  padding: 12px;
  background: #fff;
  cursor: pointer;
  transition: 0.2s;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.note-card:hover {
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

.note-card img {
  width: 100%;
  height: 120px;
  object-fit: cover;
  border-radius: 6px;
}

.note-card h4 {
  margin: 8px 0 4px;
  font-size: 16px;
  color: #222;
}

.note-card p {
  font-size: 14px;
  color: #666;
  margin: 0;
}

.note-card small {
  color: #999;
}

#markdown-viewer {
  margin-top: 40px;
  background: white;
  padding: 24px;
  border-radius: 10px;
  border: 1px solid #ccc;
  max-width: 900px;
  margin-left: auto;
  margin-right: auto;
}

.md-render h2, .md-render h3 {
  color: #444;
  margin-top: 24px;
}

.md-render p {
  line-height: 1.6;
  margin-bottom: 10px;
}

.md-render ul, .md-render ol {
  margin-left: 20px;
}

</style>

</head>
<body>
  <h1>üìò AI Notes Viewer</h1>
  <div id="content">Loading...</div>
  <hr />
  <div id="markdown-viewer" class="md-render"></div>

  <script>

    const markdownContainer = document.getElementById('markdown-viewer');
const contentContainer = document.getElementById('content');

// Load JSON data
fetch('data.json')
  .then(res => res.json())
  .then(data => {
    contentContainer.innerHTML = '';

    for (const id in data) {
      const subject = data[id];

      const subjectBlock = document.createElement('div');
      subjectBlock.className = 'subject';

      subjectBlock.innerHTML = `
        <h2>${subject.name}</h2>
        <div class="notes-container">
          ${renderNotes(subject.notes)}
        </div>
      `;

      contentContainer.appendChild(subjectBlock);
    }

    // Attach click events
    document.querySelectorAll('.note-card').forEach(card => {
      card.addEventListener('click', async () => {
        const mdUrl = card.dataset.url;
        try {
          const res = await fetch(mdUrl);
          const mdText = await res.text();
          markdownContainer.innerHTML = marked.parse(mdText);
          window.scrollTo({ top: markdownContainer.offsetTop, behavior: 'smooth' });
        } catch (err) {
          markdownContainer.innerHTML = "<p>‚ö†Ô∏è Failed to load note.</p>";
        }
      });
    });
  });

function renderNotes(notes) {
  if (!notes || notes.length === 0) return '<p>No notes available</p>';
  return notes.map(n => `
    <div class="note-card" data-url="${n.url}">
      <img src="${n.thumbnail}" alt="${n.title}">
      <h4>${n.title}</h4>
      <p>${n.subtitle}</p>
      <small>${n.exam}</small>
    </div>
  `).join('');
}

  </script>
</body>
</html>
